<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8" />
    <title>My first three.js app</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
      }
      #info{
        position: absolute;
        top: 10px;
        width: 100%;
        text-align: center;
        z-index: 100;
        display: block;
      }
      #audio{
        display:none;
      }
    </style>
  </head>
  <body>
    <audio src="dark-forest.mp3" autoplay=true loop = true></audio>
    <div id= "info">
      <div id="health"></div>
      <div id="score"></div>
    </div>
    <script src="js/three.js"></script>
    <script type="module" src="js/GLTFLoader.js"></script>

    <!-- <script src="js/GLTFLoader.js"></script> -->
    <script type="module">
      // Our Javascript will go here.
      // import GLTFLoader from 'js/GLTFLoader.js';
      // import * as THREE from './node_modules/three';
      import { GLTFLoader } from "./js/GLTFLoader.js";
      import {player, enemies, scene, loader, initialize, camera, player_bullet_list, renderer, enemy_bullet_list} from "./js_function/init.js";
      import {onKeyDown} from "./js_function/keys.js";
      import {animate} from "./js_function/animate.js";
      
      camera.position.set(-60, 150, 0)
      camera.rotation.set(-1.5707963267948966, -0.4048917862850835, -1.5707963267948966)
      
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);
      // const geometry = new THREE.BoxGeometry();
      // const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
      // const cube = new THREE.Mesh( geometry, material );
      // scene.add( cube );

      // camera.position.z = 5;


      initialize();

      scene.background = new THREE.Color(0xfffffff);
      var light = new THREE.HemisphereLight(0xffffff, 0x000000, 2);
      scene.add(light);
      // camera.position.set(0, 10, 50);
      
      
      // function animate() {
      //   requestAnimationFrame(animate);
      //   if(player){
      //     if(player.rotation.x!=0){
      //       if(player.rotation.x<0){
      //         player.rotation.x += rotate_speed;
      //       }
      //       if(player.rotation.x>0){
      //         player.rotation.x -= rotate_speed;
      //       }
      //     }
      //     if(player.rotation.z!=0){
      //       if(player.rotation.z<0){
      //         player.rotation.z += rotate_speed;
      //       }
      //       if(player.rotation.z>0){
      //         player.rotation.z -= rotate_speed;
      //       }
      //     }
      //   }
      //   // cube.rotation.x += 0.01;
      //   // cube.rotation.y += 0.01;

      //   renderer.render(scene, camera);
      // }

      animate();
      document.addEventListener('keydown', onKeyDown, false);
    </script>
  </body>
</html>
